{"ast":null,"code":"import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, vModelSelect as _vModelSelect, withDirectives as _withDirectives, vModelText as _vModelText, withModifiers as _withModifiers, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, resolveComponent as _resolveComponent, createBlock as _createBlock, createVNode as _createVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"container\"\n};\nconst _hoisted_2 = {\n  class: \"page-header text-center\",\n  style: {\n    \"margin-top\": \"20px\"\n  }\n};\nconst _hoisted_3 = {\n  class: \"d-flex justify-content-between\",\n  style: {\n    \"margin-top\": \"20px\"\n  }\n};\nconst _hoisted_4 = /*#__PURE__*/_createElementVNode(\"option\", {\n  value: \"nickname\"\n}, \"닉네임\", -1 /* HOISTED */);\nconst _hoisted_5 = [_hoisted_4];\nconst _hoisted_6 = /*#__PURE__*/_createElementVNode(\"button\", {\n  type: \"submit\",\n  style: {\n    \"background-color\": \"transparent\",\n    \"border\": \"none\"\n  }\n}, \"검색\", -1 /* HOISTED */);\nconst _hoisted_7 = {\n  class: \"table-container\"\n};\nconst _hoisted_8 = {\n  class: \"table\"\n};\nconst _hoisted_9 = /*#__PURE__*/_createElementVNode(\"thead\", null, [/*#__PURE__*/_createElementVNode(\"tr\", null, [/*#__PURE__*/_createElementVNode(\"th\", null, \"ID\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"email\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"nickname\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"role\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"휴면상태\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"랭킹\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"활성화\"), /*#__PURE__*/_createCommentVNode(\" <th>비활성화</th> \")])], -1 /* HOISTED */);\nconst _hoisted_10 = [\"href\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_toggle_component = _resolveComponent(\"toggle-component\");\n  const _component_PaginationComponent = _resolveComponent(\"PaginationComponent\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"h1\", null, _toDisplayString($props.pageTitle), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"form\", {\n    onSubmit: _cache[2] || (_cache[2] = _withModifiers((...args) => $options.searchPosts && $options.searchPosts(...args), [\"prevent\"])),\n    style: {\n      \"display\": \"flex\",\n      \"align-items\": \"center\"\n    }\n  }, [_withDirectives(_createElementVNode(\"select\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.searchType = $event),\n    style: {\n      \"width\": \"auto\",\n      \"margin-right\": \"5px\"\n    }\n  }, [..._hoisted_5], 512 /* NEED_PATCH */), [[_vModelSelect, $data.searchType]]), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.searchValue = $event),\n    type: \"text\",\n    placeholder: \"닉네임을 입력하세요\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.searchValue]]), _hoisted_6], 32 /* NEED_HYDRATION */)]), _createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"table\", _hoisted_8, [_hoisted_9, _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($options.filteredMembers, member => {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: member.id\n    }, [_createElementVNode(\"td\", null, _toDisplayString(member.id), 1 /* TEXT */), _createCommentVNode(\" <td>{{ member.email }}</td> \"), _createElementVNode(\"td\", null, [_createElementVNode(\"a\", {\n      href: `/admin/member/detail/${member.id}`\n    }, _toDisplayString($options.truncate(member.email)), 9 /* TEXT, PROPS */, _hoisted_10)]), _createElementVNode(\"td\", null, _toDisplayString(member.nickname), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(member.role), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(member.active), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(member.ranking), 1 /* TEXT */), _createElementVNode(\"div\", null, [member.active == 1 ? (_openBlock(), _createBlock(_component_toggle_component, {\n      key: 0,\n      isToggled: true,\n      onClick: $event => $options.activeMember(member.id)\n    }, null, 8 /* PROPS */, [\"onClick\"])) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" <toggle-component v-else :isToggled=\\\"true\\\" @click=\\\"deleteMember(member.id)\\\"></toggle-component> \")]), _createCommentVNode(\" <td><button @click=\\\"activeMember(member.id)\\\" class=\\\"btn btn-outline-dark\\\">활성화</button></td>\\n            <td><button @click=\\\"deleteMember(member.id)\\\" class=\\\"btn btn-outline-dark\\\">비활성화</button></td> \")]);\n  }), 128 /* KEYED_FRAGMENT */))])])]), _createCommentVNode(\" 페이지네이션 컴포넌트 추가 \"), _createVNode(_component_PaginationComponent, {\n    currentPage: $data.currentPage,\n    totalPages: $data.totalPageCount,\n    onPageChange: $options.changePage\n  }, null, 8 /* PROPS */, [\"currentPage\", \"totalPages\", \"onPageChange\"])]);\n}","map":{"version":3,"names":["class","style","_createElementVNode","value","_hoisted_4","type","_createCommentVNode","_createElementBlock","_hoisted_1","_hoisted_2","_toDisplayString","$props","pageTitle","_hoisted_3","onSubmit","_cache","_withModifiers","args","$options","searchPosts","$event","$data","searchType","_hoisted_5","searchValue","placeholder","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_Fragment","_renderList","filteredMembers","member","key","id","href","truncate","email","_hoisted_10","nickname","role","active","ranking","_createBlock","_component_toggle_component","isToggled","onClick","activeMember","_createVNode","_component_PaginationComponent","currentPage","totalPages","totalPageCount","onPageChange","changePage"],"sources":["/Users/song/Desktop/springproject/som-front/src/views/MemberList.vue"],"sourcesContent":["<template>\n  <div class=\"container\">\n    <div class=\"page-header text-center\" style=\"margin-top: 20px\">\n      <h1>{{ pageTitle }}</h1>\n    </div>\n    <div class=\"d-flex justify-content-between\" style=\"margin-top: 20px;\">\n      <form @submit.prevent=\"searchPosts\" style=\"display: flex; align-items: center;\">\n        <select v-model=\"searchType\" style=\"width: auto; margin-right: 5px;\">\n          <option value=\"nickname\">닉네임</option>\n        </select>\n        <input v-model=\"searchValue\" type=\"text\" placeholder=\"닉네임을 입력하세요\"/>\n        <button type=\"submit\" style=\"background-color: transparent; border: none;\">검색</button>\n      </form>\n    </div>\n    <div class=\"table-container\">\n      <table class=\"table\">\n        <thead>\n          <tr>\n            <th>ID</th>\n            <th>email</th>\n            <th>nickname</th>\n            <th>role</th>\n            <th>휴면상태</th>\n            <th>랭킹</th>\n            <th>활성화</th>\n            <!-- <th>비활성화</th> -->\n          </tr>\n        </thead>\n        <tbody>\n          <tr v-for=\"member in filteredMembers\" :key=\"member.id\">\n            <td>{{ member.id }}</td>\n            <!-- <td>{{ member.email }}</td> -->\n            <td>\n              <a :href=\"`/admin/member/detail/${member.id}`\">{{ truncate(member.email) }}</a>\n            </td>\n            <td>{{ member.nickname }}</td>\n            <td>{{ member.role }}</td>\n            <td>{{ member.active }}</td>\n            <td>{{ member.ranking }}</td>\n            <div>\n              <toggle-component v-if=\"member.active == 1\" :isToggled=\"true\" @click=\"activeMember(member.id)\"></toggle-component>\n              <!-- <toggle-component v-else :isToggled=\"true\" @click=\"deleteMember(member.id)\"></toggle-component> -->\n            </div>\n            \n            <!-- <td><button @click=\"activeMember(member.id)\" class=\"btn btn-outline-dark\">활성화</button></td>\n            <td><button @click=\"deleteMember(member.id)\" class=\"btn btn-outline-dark\">비활성화</button></td> -->\n          </tr>\n        </tbody>\n      </table>\n    </div>\n    <!-- 페이지네이션 컴포넌트 추가 -->\n    <PaginationComponent :currentPage=\"currentPage\" :totalPages=\"totalPageCount\" @page-change=\"changePage\" />\n  </div>\n</template>\n\n<script>\nimport axios from 'axios';\nimport PaginationComponent from '@/components/PaginationComponent.vue';\nimport ToggleComponent from '@/components/ToggleComponent.vue'; // 토글 컴포넌트 추가\n\nexport default {\n  components: {\n    PaginationComponent,\n    ToggleComponent // 토글 컴포넌트 등록\n  },\n  props: ['isAdmin', 'pageTitle', 'member'],\n  data() {\n    return {\n      memberList: [],\n      pageSize: 10,\n      currentPage: 0,\n      searchType: 'nickname',\n      searchValue: '',\n      isLastPage: false,\n      isLoading: false,\n      totalPageCount: 0\n    };\n  },\n  created() {\n    this.loadPosts();\n  },\n  methods: {\n    truncate(value, length = 10) {\n      if (!value) return '';\n      if (value.length <= length) return value;\n      return value.substr(0, length) + '...';\n    },\n    async searchPosts() {\n      this.currentPage = 0;\n      this.loadPosts();\n    },\n    async deleteMember(memberId) {\n      if (confirm(\"비활성화 하시겠습니까?\")) {\n        const token = localStorage.getItem('token');\n        const headers = token ? { Authorization: `Bearer ${token}` } : {};\n        await axios.delete(`${process.env.VUE_APP_API_BASE_URL}/admin/member/delete/${memberId}`, { headers });\n        window.location.reload();\n      }\n    },\n    async activeMember(memberId) {\n      if (confirm(\"활성화 하시겠습니까?\")) {\n        const token = localStorage.getItem('token');\n        const headers = token ? { Authorization: `Bearer ${token}` } : {};\n        await axios.post(`${process.env.VUE_APP_API_BASE_URL}/admin/member/active/${memberId}`, {}, { headers });\n        window.location.reload();\n      }\n    },\n    async loadPosts() {\n      this.isLoading = true;\n      try {\n        const params = {\n          page: this.currentPage,\n          size: this.pageSize,\n          nickname: this.searchValue\n        }\n        const token = localStorage.getItem('token');\n        const headers = token ? { Authorization: `Bearer ${token}` } : {};\n        const response = await axios.get(`${process.env.VUE_APP_API_BASE_URL}/admin/member`, { headers, params });\n        this.memberList = response.data.data;\n        this.totalPageCount = response.data.totalPage;\n        console.log(response.data.count)\n        console.log(this.memberList)\n      } catch (error) {\n        console.error(\"데이터 불러오기 오류:\", error);\n      }\n      this.isLoading = false;\n    },\n    changePage(pageNum) {\n      this.currentPage = pageNum;\n      this.loadPosts();\n    }\n  },\n  computed: {\n    filteredMembers() {\n      return this.memberList.filter(member => member.nickname.includes(this.searchValue));\n    }\n  }\n};\n</script>\n\n<style>\n.table-container {\n  box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);\n}\n</style>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}