{"ast":null,"code":"import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, vModelSelect as _vModelSelect, withDirectives as _withDirectives, vModelText as _vModelText, withModifiers as _withModifiers, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, resolveComponent as _resolveComponent, createVNode as _createVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"container\"\n};\nconst _hoisted_2 = {\n  class: \"page-header text-center\",\n  style: {\n    \"margin-top\": \"20px\"\n  }\n};\nconst _hoisted_3 = {\n  class: \"d-flex justify-content-between\",\n  style: {\n    \"margin-top\": \"20px\"\n  }\n};\nconst _hoisted_4 = /*#__PURE__*/_createElementVNode(\"option\", {\n  value: \"nickname\"\n}, \"닉네임\", -1 /* HOISTED */);\nconst _hoisted_5 = [_hoisted_4];\nconst _hoisted_6 = /*#__PURE__*/_createElementVNode(\"button\", {\n  type: \"submit\"\n}, \"검색\", -1 /* HOISTED */);\nconst _hoisted_7 = {\n  class: \"table\"\n};\nconst _hoisted_8 = /*#__PURE__*/_createElementVNode(\"thead\", null, [/*#__PURE__*/_createElementVNode(\"tr\", null, [/*#__PURE__*/_createElementVNode(\"th\", null, \"ID\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"email\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"nickname\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"role\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"휴면상태\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"랭킹\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"활성화\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"비활성화\")])], -1 /* HOISTED */);\nconst _hoisted_9 = [\"href\"];\nconst _hoisted_10 = [\"onClick\"];\nconst _hoisted_11 = [\"onClick\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_PaginationComponent = _resolveComponent(\"PaginationComponent\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"h1\", null, _toDisplayString($props.pageTitle), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"form\", {\n    onSubmit: _cache[2] || (_cache[2] = _withModifiers((...args) => $options.searchPosts && $options.searchPosts(...args), [\"prevent\"])),\n    style: {\n      \"display\": \"flex\",\n      \"align-items\": \"center\"\n    }\n  }, [_withDirectives(_createElementVNode(\"select\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.searchType = $event),\n    style: {\n      \"width\": \"auto\",\n      \"margin-right\": \"5px\"\n    }\n  }, [..._hoisted_5], 512 /* NEED_PATCH */), [[_vModelSelect, $data.searchType]]), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.searchValue = $event),\n    type: \"text\",\n    placeholder: \"닉네임을 입력하세요\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.searchValue]]), _hoisted_6], 32 /* NEED_HYDRATION */)]), _createElementVNode(\"table\", _hoisted_7, [_hoisted_8, _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($options.filteredMembers, member => {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: member.id\n    }, [_createElementVNode(\"td\", null, _toDisplayString(member.id), 1 /* TEXT */), _createCommentVNode(\" <td>{{ member.email }}</td> \"), _createElementVNode(\"td\", null, [_createElementVNode(\"a\", {\n      href: `/admin/member/detail/${member.id}`\n    }, _toDisplayString($options.truncate(member.email)), 9 /* TEXT, PROPS */, _hoisted_9)]), _createElementVNode(\"td\", null, _toDisplayString(member.nickname), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(member.role), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(member.active), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(member.ranking), 1 /* TEXT */), _createElementVNode(\"td\", null, [_createElementVNode(\"button\", {\n      onClick: $event => $options.activeMember(member.id),\n      class: \"btn btn-secondary\"\n    }, \"활성화\", 8 /* PROPS */, _hoisted_10)]), _createElementVNode(\"td\", null, [_createElementVNode(\"button\", {\n      onClick: $event => $options.deleteMember(member.id),\n      class: \"btn btn-secondary\"\n    }, \"비활성화\", 8 /* PROPS */, _hoisted_11)])]);\n  }), 128 /* KEYED_FRAGMENT */))])]), _createCommentVNode(\" 페이지네이션 컴포넌트 추가 \"), _createVNode(_component_PaginationComponent, {\n    currentPage: $data.currentPage,\n    totalPages: $data.totalPageCount,\n    onPageChange: $options.changePage\n  }, null, 8 /* PROPS */, [\"currentPage\", \"totalPages\", \"onPageChange\"])]);\n}","map":{"version":3,"names":["class","style","_createElementVNode","value","_hoisted_4","type","_createElementBlock","_hoisted_1","_hoisted_2","_toDisplayString","$props","pageTitle","_hoisted_3","onSubmit","_cache","_withModifiers","args","$options","searchPosts","$event","$data","searchType","_hoisted_5","searchValue","placeholder","_hoisted_6","_hoisted_7","_hoisted_8","_Fragment","_renderList","filteredMembers","member","key","id","_createCommentVNode","href","truncate","email","_hoisted_9","nickname","role","active","ranking","onClick","activeMember","_hoisted_10","deleteMember","_hoisted_11","_createVNode","_component_PaginationComponent","currentPage","totalPages","totalPageCount","onPageChange","changePage"],"sources":["/Users/song/Desktop/springproject/som-front/src/views/MemberList.vue"],"sourcesContent":["<template>\n    <div class=\"container\">\n      <div class=\"page-header text-center\" style=\"margin-top: 20px\">\n        <h1>{{ pageTitle }}</h1>\n      </div>\n      <div class=\"d-flex justify-content-between\" style=\"margin-top: 20px;\">\n        <form @submit.prevent=\"searchPosts\" style=\"display: flex; align-items: center;\">\n          <select v-model=\"searchType\" style=\"width: auto; margin-right: 5px;\">\n            <option value=\"nickname\">닉네임</option>\n          </select>\n          <input v-model=\"searchValue\" type=\"text\" placeholder=\"닉네임을 입력하세요\"/>\n          <button type=\"submit\">검색</button>\n        </form>\n      </div>\n      <table class=\"table\">\n        <thead>\n          <tr>\n            <th>ID</th>\n            <th>email</th>\n            <th>nickname</th>\n            <th>role</th>\n            <th>휴면상태</th>\n            <th>랭킹</th>\n            <th>활성화</th>\n            <th>비활성화</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr v-for=\"member in filteredMembers\" :key=\"member.id\">\n            <td>{{ member.id }}</td>\n            <!-- <td>{{ member.email }}</td> -->\n            <td>\n              <a :href=\"`/admin/member/detail/${member.id}`\">{{ truncate(member.email) }}</a>\n            </td>\n            <td>{{ member.nickname }}</td>\n            <td>{{ member.role }}</td>\n            <td>{{ member.active }}</td>\n            <td>{{ member.ranking }}</td>\n            <td><button @click=\"activeMember(member.id)\" class=\"btn btn-secondary\">활성화</button></td>\n            <td><button @click=\"deleteMember(member.id)\" class=\"btn btn-secondary\">비활성화</button></td>\n          </tr>\n        </tbody>\n      </table>\n      <!-- 페이지네이션 컴포넌트 추가 -->\n      <PaginationComponent :currentPage=\"currentPage\" :totalPages=\"totalPageCount\" @page-change=\"changePage\" />\n    </div>\n</template>\n<script>\nimport axios from 'axios';\nimport PaginationComponent  from '@/components/PaginationComponent.vue'; // 컴포넌트 이름 변경\nexport default {\n  components: {\n    PaginationComponent  // 컴포넌트 이름 변경된 것을 등록합니다.\n  },\n  props: ['isAdmin', 'pageTitle'],\n  data() {\n    return {\n      memberList: [],\n      pageSize: 10, // 페이지 당 목록 갯수\n      currentPage: 0, // 화면 페이지 (최초에는 1로 설정)\n      searchType: 'nickname', // 검색 기본값\n      searchValue: '',\n      isLastPage: false,\n      isLoading: false,\n      totalPageCount: 0 // 전체 페이지 수\n    };\n  },\n  created() {\n    this.loadPosts();\n  },\n  methods: {\n    truncate(value, length = 10) {\n      if (!value) return '';\n      if (value.length <= length) return value;\n      return value.substr(0, length) + '...';\n    },\n    async searchPosts() {\n      this.currentPage = 1; // 검색을 하면 페이지를 다시 1페이지로 설정\n      this.loadPosts();\n    },\n    async deleteMember(memberId) {\n      if (confirm(\"비활성화 하시겠습니까?\")) {\n        const token = localStorage.getItem('token');\n        const headers = token ? { Authorization: `Bearer ${token}` } : {};\n        await axios.delete(`${process.env.VUE_APP_API_BASE_URL}/admin/member/delete/${memberId}`, { headers });\n        window.location.reload();\n      }\n    },\n    async activeMember(memberId) {\n      if (confirm(\"활성화 하시겠습니까?\")) {\n        const token = localStorage.getItem('token');\n        const headers = token ? { Authorization: `Bearer ${token}` } : {};\n        await axios.post(`${process.env.VUE_APP_API_BASE_URL}/admin/member/active/${memberId}`, {}, { headers });\n        window.location.reload();\n      }\n    },\n    async loadPosts() {\n      this.isLoading = true;\n      try {\n        const params = {\n          page: this.currentPage,\n          size: this.pageSize,\n          nickname: this.searchValue\n        }\n        const token = localStorage.getItem('token');\n        const headers = token ? { Authorization: `Bearer ${token}` } : {};\n        const response = await axios.get(`${process.env.VUE_APP_API_BASE_URL}/admin/member`, { headers, params });\n        this.memberList = response.data.data;\n        this.totalPageCount = response.data.totalPage; // 전체 페이지 수 업데이트\n        console.log(response.data.count)\n      } catch (error) {\n        console.error(\"데이터 불러오기 오류:\", error);\n      }\n      this.isLoading = false;\n    },\n    changePage(pageNum) {\n      this.currentPage = pageNum;\n      this.loadPosts();\n    }\n  },\n  computed: {\n    filteredMembers() {\n      return this.memberList.filter(member => member.nickname.includes(this.searchValue));\n    }\n  }\n};\n</script>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}