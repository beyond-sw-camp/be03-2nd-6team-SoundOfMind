{"ast":null,"code":"import axios from 'axios';\nimport PaginationComponent from '@/components/PaginationComponent.vue'; // 컴포넌트 이름 변경\nexport default {\n  components: {\n    PaginationComponent // 컴포넌트 이름 변경된 것을 등록합니다.\n  },\n  props: ['isAdmin', 'pageTitle'],\n  data() {\n    return {\n      memberList: [],\n      pageSize: 10,\n      // 페이지 당 목록 갯수\n      currentPage: 0,\n      // 화면 페이지 (최초에는 1로 설정)\n      searchType: 'nickname',\n      // 검색 기본값\n      searchValue: '',\n      isLastPage: false,\n      isLoading: false,\n      totalPageCount: 0 // 전체 페이지 수\n    };\n  },\n  created() {\n    this.loadPosts();\n  },\n  methods: {\n    truncate(value, length = 10) {\n      if (!value) return '';\n      if (value.length <= length) return value;\n      return value.substr(0, length) + '...';\n    },\n    async searchPosts() {\n      this.currentPage = 1; // 검색을 하면 페이지를 다시 1페이지로 설정\n      this.loadPosts();\n    },\n    async deleteMember(memberId) {\n      if (confirm(\"비활성화 하시겠습니까?\")) {\n        const token = localStorage.getItem('token');\n        const headers = token ? {\n          Authorization: `Bearer ${token}`\n        } : {};\n        await axios.delete(`${process.env.VUE_APP_API_BASE_URL}/admin/member/delete/${memberId}`, {\n          headers\n        });\n        window.location.reload();\n      }\n    },\n    async activeMember(memberId) {\n      if (confirm(\"활성화 하시겠습니까?\")) {\n        const token = localStorage.getItem('token');\n        const headers = token ? {\n          Authorization: `Bearer ${token}`\n        } : {};\n        await axios.post(`${process.env.VUE_APP_API_BASE_URL}/admin/member/active/${memberId}`, {}, {\n          headers\n        });\n        window.location.reload();\n      }\n    },\n    async loadPosts() {\n      this.isLoading = true;\n      try {\n        const params = {\n          page: this.currentPage,\n          size: this.pageSize,\n          nickname: this.searchValue\n        };\n        const token = localStorage.getItem('token');\n        const headers = token ? {\n          Authorization: `Bearer ${token}`\n        } : {};\n        const response = await axios.get(`${process.env.VUE_APP_API_BASE_URL}/admin/member`, {\n          headers,\n          params\n        });\n        this.memberList = response.data.data;\n        this.totalPageCount = response.data.totalPage; // 전체 페이지 수 업데이트\n        console.log(response.data.count);\n      } catch (error) {\n        console.error(\"데이터 불러오기 오류:\", error);\n      }\n      this.isLoading = false;\n    },\n    changePage(pageNum) {\n      this.currentPage = pageNum;\n      this.loadPosts();\n    }\n  },\n  computed: {\n    filteredMembers() {\n      return this.memberList.filter(member => member.nickname.includes(this.searchValue));\n    }\n  }\n};","map":{"version":3,"names":["axios","PaginationComponent","components","props","data","memberList","pageSize","currentPage","searchType","searchValue","isLastPage","isLoading","totalPageCount","created","loadPosts","methods","truncate","value","length","substr","searchPosts","deleteMember","memberId","confirm","token","localStorage","getItem","headers","Authorization","delete","process","env","VUE_APP_API_BASE_URL","window","location","reload","activeMember","post","params","page","size","nickname","response","get","totalPage","console","log","count","error","changePage","pageNum","computed","filteredMembers","filter","member","includes"],"sources":["/Users/song/Desktop/springproject/som-front/src/views/MemberList.vue"],"sourcesContent":["<template>\n    <div class=\"container\">\n      <div class=\"page-header text-center\" style=\"margin-top: 20px\">\n        <h1>{{ pageTitle }}</h1>\n      </div>\n      <div class=\"d-flex justify-content-between\" style=\"margin-top: 20px;\">\n        <form @submit.prevent=\"searchPosts\" style=\"display: flex; align-items: center;\">\n          <select v-model=\"searchType\" style=\"width: auto; margin-right: 5px;\">\n            <option value=\"nickname\">닉네임</option>\n          </select>\n          <input v-model=\"searchValue\" type=\"text\" placeholder=\"닉네임을 입력하세요\"/>\n          <button type=\"submit\">검색</button>\n        </form>\n      </div>\n      <table class=\"table\">\n        <thead>\n          <tr>\n            <th>ID</th>\n            <th>email</th>\n            <th>nickname</th>\n            <th>role</th>\n            <th>휴면상태</th>\n            <th>랭킹</th>\n            <th>활성화</th>\n            <th>비활성화</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr v-for=\"member in filteredMembers\" :key=\"member.id\">\n            <td>{{ member.id }}</td>\n            <!-- <td>{{ member.email }}</td> -->\n            <td>\n              <a :href=\"`/admin/member/detail/${member.id}`\">{{ truncate(member.email) }}</a>\n            </td>\n            <td>{{ member.nickname }}</td>\n            <td>{{ member.role }}</td>\n            <td>{{ member.active }}</td>\n            <td>{{ member.ranking }}</td>\n            <td><button @click=\"activeMember(member.id)\" class=\"btn btn-secondary\">활성화</button></td>\n            <td><button @click=\"deleteMember(member.id)\" class=\"btn btn-secondary\">비활성화</button></td>\n          </tr>\n        </tbody>\n      </table>\n      <!-- 페이지네이션 컴포넌트 추가 -->\n      <PaginationComponent :currentPage=\"currentPage\" :totalPages=\"totalPageCount\" @page-change=\"changePage\" />\n    </div>\n</template>\n<script>\nimport axios from 'axios';\nimport PaginationComponent  from '@/components/PaginationComponent.vue'; // 컴포넌트 이름 변경\nexport default {\n  components: {\n    PaginationComponent  // 컴포넌트 이름 변경된 것을 등록합니다.\n  },\n  props: ['isAdmin', 'pageTitle'],\n  data() {\n    return {\n      memberList: [],\n      pageSize: 10, // 페이지 당 목록 갯수\n      currentPage: 0, // 화면 페이지 (최초에는 1로 설정)\n      searchType: 'nickname', // 검색 기본값\n      searchValue: '',\n      isLastPage: false,\n      isLoading: false,\n      totalPageCount: 0 // 전체 페이지 수\n    };\n  },\n  created() {\n    this.loadPosts();\n  },\n  methods: {\n    truncate(value, length = 10) {\n      if (!value) return '';\n      if (value.length <= length) return value;\n      return value.substr(0, length) + '...';\n    },\n    async searchPosts() {\n      this.currentPage = 1; // 검색을 하면 페이지를 다시 1페이지로 설정\n      this.loadPosts();\n    },\n    async deleteMember(memberId) {\n      if (confirm(\"비활성화 하시겠습니까?\")) {\n        const token = localStorage.getItem('token');\n        const headers = token ? { Authorization: `Bearer ${token}` } : {};\n        await axios.delete(`${process.env.VUE_APP_API_BASE_URL}/admin/member/delete/${memberId}`, { headers });\n        window.location.reload();\n      }\n    },\n    async activeMember(memberId) {\n      if (confirm(\"활성화 하시겠습니까?\")) {\n        const token = localStorage.getItem('token');\n        const headers = token ? { Authorization: `Bearer ${token}` } : {};\n        await axios.post(`${process.env.VUE_APP_API_BASE_URL}/admin/member/active/${memberId}`, {}, { headers });\n        window.location.reload();\n      }\n    },\n    async loadPosts() {\n      this.isLoading = true;\n      try {\n        const params = {\n          page: this.currentPage,\n          size: this.pageSize,\n          nickname: this.searchValue\n        }\n        const token = localStorage.getItem('token');\n        const headers = token ? { Authorization: `Bearer ${token}` } : {};\n        const response = await axios.get(`${process.env.VUE_APP_API_BASE_URL}/admin/member`, { headers, params });\n        this.memberList = response.data.data;\n        this.totalPageCount = response.data.totalPage; // 전체 페이지 수 업데이트\n        console.log(response.data.count)\n      } catch (error) {\n        console.error(\"데이터 불러오기 오류:\", error);\n      }\n      this.isLoading = false;\n    },\n    changePage(pageNum) {\n      this.currentPage = pageNum;\n      this.loadPosts();\n    }\n  },\n  computed: {\n    filteredMembers() {\n      return this.memberList.filter(member => member.nickname.includes(this.searchValue));\n    }\n  }\n};\n</script>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}